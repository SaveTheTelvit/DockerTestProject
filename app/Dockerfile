# Базовый образ Node.js
FROM node

# Рабочая папка внутри контейнера
WORKDIR /usr/src/app
# Копирование файлов зависимостей в рабочую папку
COPY package.json package-lock.json ./
# Установка зависимостей на основе файлов зависимостей
RUN npm ci
# Копирование всех файлов приложения в рабочую папку контейнера
COPY . .

# Коприрование сначала файлов зависимостей и копирование остальных после
# nmp ci обусловленно кешированием данных при запуске контейнеров docker.
# Если бы копирование происходило сразу всех файлов - добавление или изменение
# Хотябы одного заставляло бы производит npm ci с нуля

#Команда запуска приложения
CMD ["npm","start"]
